doctype 5
html(ng-app='talkie', lang='fa')
  head
    meta(http-equiv='content-type', content='text/html', charset='utf-8')
    base(href='/')
    title(ng-bind='title.title') هورین
    block css
      link(rel='stylesheet', type='text/css', href='/lib/bootstrap/dist/css/bootstrap.min.css')
      link(rel='stylesheet', type='text/css', href='/css/app.css')
      link(rel='stylesheet', type='text/css', href='/css/font.css')
      link(rel='stylesheet', type='text/css', href='/css/chat.css')

  body(dir='rtl')
    #main(data-ng-controller='ChatCtrl')
      .container.fill(data-ng-controller='MsgCtrl')

        //- design for xs
        .row.hidden-lg.hidden-md.hidden-sm.visible-xs
          .container(style="height: 100%")
            .row(style="min-height:40px;")
              .col-xs-1(style="")
                img.image(src="/img/logo.png",style="float:left;height: 40px; width:40px;" alt="ایجاد ارتباط")
              .col-xs-1
              .col-xs-3
                p.text-info(style="text-align: left;font-size: 1.5em") هورین
              .col-xs-6
                button.btn.btn-primary.btn-md.btn-block(data-ng-click='findStranger()') گفتگو با نفر بعد
              .col-xs-1
          .row(style="height: 5px;")
            hr(style="margin-top: 0px; margin-bottom: 0px;")
          .container
            .row(style="height: 30px;margin-right: 20px;")
              p اسامی اشخاص
            .row(style="width: 100%;background: gray; position: fixed;height: 67%; margin-bottom: 150px;")
              .messages(data-scroll-btm)
                .message(ng-class='msg.from',ng-repeat='msg in msg.msgs')
                  .text
                    pre.
                      {{ msg.text }}

            .row(style="position: fixed;bottom: 45px;right: 0; left: 0;")
              p.text-muted(style="text-align: center") در حال نوشتن...

          .row(style="position:fixed;margin-bottom: 5px;left: 0; right: 0;bottom: 0;")
            .container
              .row(style="")
                .col-xs-2(style="")
                .col-xs-8
                  .input-group(style="width: 80%;")
                    span.input-group-btn(style="float:left; width:0;")
                      button.btn.btn-default.btn-lg(
                        data-ng-click='sendMsg();',
                        data-ng-disabled='loading.enable || !msg.curMsg',
                      ) بفرست
                    input#chat-input.input-lg.form-control.col-lg-12(
                      type="text",
                      data-ng-model='msg.curMsg',
                      data-ng-disabled='loading.enable',
                      data-ret-pressed='sendMsg();',
                      data-ng-change='typing()',
                      data-get-focus='!loading.enable'
                    )
                .col-xs-2(style="")

        //- Design for other devices
        .row.visible-lg.visible-md.visible-sm.hidden-xs.fill
          .col-sm-9.col-md-9.fill
            .row.fill
              .col-sm-1
              .col-sm-10.fill
                .row
                  br
                  br 
                  br
                .row
                  p آی آدم ها که در ساحل نشسته شاد و خندانید
                .row(style="background: orange; max-height: 70%; position:absolute; width:100%; height: 60%")
                  .messages(data-scroll-btm)
                    .message(ng-class='msg.from',ng-repeat='msg in msg.msgs')
                      .text
                        pre.
                          {{ msg.text }}

                .row(style="position: fixed;bottom: 100px; width: 100%;")
                  p.text-muted در حال نوشتن...

                .row(style="position: fixed; bottom:60px;width: 60%")
                  .col-sm-2
                  .col-sm-10
                    .input-group(style="width: 100%;")
                      span.input-group-btn(style="float:left; width:0;")
                        button.btn.btn-default.btn-lg(
                          data-ng-click='sendMsg();',
                          data-ng-disabled='loading.enable || !msg.curMsg',
                        ) بفرست
                      input#chat-input.input-lg.form-control.col-lg-12(
                        type="text",
                        data-ng-model='msg.curMsg',
                        data-ng-disabled='loading.enable',
                        data-ret-pressed='sendMsg();',
                        data-ng-change='typing()',
                        data-get-focus='!loading.enable'
                      )
                  
              .col-sm-1
          .col-sm-3.col-md-2
            .row
              img.img-responsive.image(src="/img/logo.png", alt="ایجاد ارتباط")
            .row
              p.text-info.center(style="font-size: 3em;") هورین 
              p.text-muted.center ناشناخته ها را تجربه کن
            hr
            .row
              button.btn.btn-primary.btn-lg.btn-block(type="button", data-ng-click='findStranger()') گفتگو با نفر بعد
              button.btn.btn-default.btn-lg.btn-block(type="button", data-ng-href='/exit') خروج از چت
              p.center.text-muted.
                برای گزارش ایراد با ما تماس بگیرید!
        

      //- .row.visible-lg.visible-md.visible-sm.hidden-xs
      //-   .col-xs-12.col-sm-9
      //-     .row
      //-       .col-xs-3
      //-         img(src="/img/logo.png",style="float:left;width: 35px;margin-left: 5px; height:35px;" alt="ایجاد ارتباط")
      //-       .col-xs-9
      //-         button.btn.btn-default.btn-md.btn-block(data-ng-click='findStranger()') گفتگو با نفر بعد

      //-     hr.visible-xs.hidden-sm.hidden-md.hidden-lg(style="margin-top: -0.5px;")
      //-     .row(data-ng-controller='MsgCtrl') 
      //-       //-style="bottom: 0;background:red;position:absolute;height: 100%;")
      //-       .hidden-xs.col-sm-1
      //-         sdfds گوشه اینور
      //-       .col-xs-12.col-sm-10
      //-         //- textarea.form-class(rows='10')
      //-         //- input.form-class(type="text")
      //-         .row
      //-           //-(style="position:fixed;background: red; top:0;bottom:0;height:100%;width:100%")
      //-           .col-xs-12
      //-             .row
      //-               p sslaaaaaaaaaaaaaaaaaam
      //-               .messages(data-scroll-btm)
      //-                 .message(ng-class='msg.from',ng-repeat='msg in msg.msgs')
      //-                   .text
      //-                     pre.
      //-                       {{ msg.text }}

      //-             .row
                    .input-group 
                      span.input-group-btn(style="float:left; width:0;")
                        button.btn.btn-default.btn-lg(
                          data-ng-click='sendMsg();console.log("chera?")',
                          data-ng-disabled='loading.enable || !msg.curMsg',
                        ) بفرست
                      input#chat-input.input-lg.form-control.col-lg-12(
                        type="text",
                        data-ng-model='msg.curMsg',
                        data-ng-disabled='loading.enable',
                        data-ret-pressed='sendMsg();',
                        data-ng-change='typing()',
                        data-get-focus='!loading.enable'
                      )

      //-       //- .hidden-xs.col-sm-1
      //-       //-   sdfd گوشه اونور


      //-   .hidden-xs.col-sm-2
      //-     img.img-responsive.image(src="/img/logo.png", alt="ایجاد ارتباط")
      //-     //- .hidden-lg.hidden-md.hidden-sm.visible-xs
      //-     p.titr هورین
      //-     p.text-info.
      //-       ناشناخته ها را تجربه کن! 
      //-     hr
      //-     button.btn.btn-primary.btn-lg.btn-block(type="button", data-ng-click='findStranger()') گفتگو با نفر بعد
      //-     button.btn.btn-default.btn-lg.btn-block(type="button", data-ng-href='/exit') خروج از چت
      //-     p.text-muted.
      //-       برای گزارش ایراد با ما تماس بگیرید!
      
        
   
      .container.fill(data-ng-init='init();')
        .loading(data-ng-show='loading.enable', style='display: none;')
          .row 
            .col-md-2.col-md-offset-5
              .spinner.image
          .row
            .col-md-4.col-md-offset-4
              p.text-muted شکیبا باشید!
              p.titr در حال یافتن هم صحبتی ناشناس هستیم!


  include bottom-js.jade
    script(src='/socket.io/socket.io.js')



//-       .row
//-         .col-md-12
//-           .row
//-             .col-md-3.actions
//-               a(data-ng-click='findStranger()' href='#')
//-                 .action
//-                   بعدی
//-               a(data-ng-href='/exit')
//-                 .action
//-                   خروج
//-             .col-md-9.chat-box(data-ng-controller='MsgController')
//-               .row.messages(data-scroll-btm)
//-                 .col-md-12(ng-repeat='msg in msg.msgs')
//-                   .message
//-                     .author(ng-class='{me: msg.from == "me", stranger: msg.from != "me"}')
//-                       | {{ msg.from }}
//-                     .text
//-                       pre.
//-                         {{ msg.text }}
//-                 .stranger-typing(data-ng-show='strangerTyping')
//-                   در حال نوشتن
//-               .row.fill.input
//-                 .col-md-2.fill
//-                   button.btn.btn-info.btn-disabled(data-ng-click='sendMsg()', data-ng-disabled='loading.enable') بفرست
//-                 .col-md-10.fill
//-                   textarea.form-control(data-ng-model='msg.curMsg',
//-                     data-ng-disabled='loading.enable',
//-                     data-ret-pressed='sendMsg();', data-ng-change='typing()',
//-                     data-get-focus='!loading.enable'
//-                   )
//-     div.notif(data-ng-show='notif.show', style='display: none;')
//-       span.glyphicon.glyphicon-remove(data-ng-click='notif.clear()')
//-       p {{ notif.msg }}


//- block prepend bottom-js

